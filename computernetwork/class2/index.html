<!doctype html>

<html lang="en">

<head>
  <title>Class2 - WZYtrick&#39;s Blog</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="WZYtrick&#39;s blog." />
<meta name="author" content="WZYtrick" /><meta property="og:title" content="Class2" />
<meta property="og:description" content="Link layer and LANs ​	The goal of data-link layer is transferring datagram from one node to adjacent(相邻) node over a link.
Services provided by Link Layer   Framing , link access" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wzytrick.github.io/computernetwork/class2/" />
<meta property="article:published_time" content="2021-03-17T14:01:33+08:00" />
<meta property="article:modified_time" content="2021-03-17T14:01:33+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Class2"/>
<meta name="twitter:description" content="Link layer and LANs ​	The goal of data-link layer is transferring datagram from one node to adjacent(相邻) node over a link.
Services provided by Link Layer   Framing , link access"/>

<meta name="generator" content="Hugo 0.80.0" />
    

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://wzytrick.github.io/fontawesome/css/all.min.css" />
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  
  
  <link rel="stylesheet" type="text/css" href="https://wzytrick.github.io/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://wzytrick.github.io/">WZYtrick&rsquo;s Blog</a>
            </h1>

      <ul id="social-media">
             <li>
               <a href="mailto:1679636965@qq.com" title="Email me">
               <i class="fas fa-envelope fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://github.com/WZYtrick" title="GitHub">
               <i class="fab fa-github fa-lg"></i>
               </a>
             </li>
      </ul>
      
      <p><em>A blog which belongs to WZYtrick.</em></p>
      
    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="" href="https://wzytrick.github.io/computernetwork/">
                <i class="fa-li fa  fa-lg"></i><span>Computer Network</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/datastructure/">
                <i class="fa-li fa  fa-lg"></i><span>Data Structure</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/db/">
                <i class="fa-li fa  fa-lg"></i><span>DataBase</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/os/">
                <i class="fa-li fa  fa-lg"></i><span>OS</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/posts/">
                <i class="fa-li fa  fa-lg"></i><span>Posts</span>
            </a>
        </li>
        
    </ul>
</nav>


    <main>




<article>

    <h1>Class2</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2021-03-17T14:01:33&#43;08:00">Mar 17, 2021</time>
        </li>
        
        

        

        <li>2 minutes read</li>
    </ul>
</aside>

    

    
<div class="featured_image">
    <a href="https://wzytrick.github.io/computernetwork/class2/" title="Class2">
        <img src="">
    </a>
</div>



    <h1 id="link-layer--and-lans">Link layer  and LANs</h1>
<p>​	The goal of data-link layer is <strong>transferring datagram from one node to adjacent(相邻) node</strong> over a link.</p>
<h2 id="services-provided-by-link-layer">Services provided by Link Layer</h2>
<ul>
<li>
<p>Framing , link access</p>
<ul>
<li>
<p>encapsulate datagram into frame(加入header,trailer 一般头部添加用于寻址的数据，尾部添加校验的数据)</p>
</li>
<li>
<p>medium access control</p>
</li>
</ul>
</li>
<li>
<p>数据发送的可靠性</p>
<ul>
<li>在有线网络中很少发生错误(fiber光纤 twisted pair双绞线)</li>
<li>在无线网络中发生错误频率更高(WIFI)</li>
</ul>
</li>
<li>
<p>Flow control 流控制</p>
<p>发送节点与接收节点需要保持相同的发送接收速度，防止产生丢包等情况</p>
</li>
<li>
<p>Error Detection and Correction</p>
</li>
<li>
<p>实现Half-duplex(半双工) 或Full-duplex(全双工)</p>
</li>
</ul>
<h2 id="where-is-the-link-layer-implemented">Where is the Link Layer implemented?</h2>
<p>链路层主体部分实现于网络适配器也称网络接口卡(network adapter/network interface card,NIC)</p>
<h2 id="error-detection-and-correction">Error Detection and Correction</h2>
<p>Error-Detection and-Correction bit : EDC</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202103/20/123920-998535.png" alt="校验edc图"></p>
<h3 id="几种常见的校验方式">几种常见的校验方式</h3>
<ul>
<li>
<p>奇偶校验 Parity Checking</p>
<p>使用单个bit的奇偶校验，凑一位1使1的总数变为偶数。</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202103/20/123927-590685.png" alt="奇偶校验单个"></p>
<p>二维奇偶校验，同一维操作。</p>
<p><img src="C:\Users\16796\Desktop\.md图片\二维奇偶校验.PNG" alt="二维奇偶校验" style="zoom:80%;" /></p>
</li>
<li>
<p>检验和 Internet Checksum (由于链路层无法进行复杂算术运算，仅用于传输层)</p>
<p>将字段每16bit作为一个整数对整个字段求和将结果作为校验码发送给接收端，接收端校验数据是否正确。</p>
</li>
<li>
<p>循环冗余检测 Cyclic Redundancy Check</p>
<p>取定一个用于验证的除数(这里被称作生成多项式)</p>
<p>将数据作为01串补除数减一位的0除以除数，将数据与余数发送给接收方，接收方验证数据加余数除以验证除数，若结果为0则数据正确。其中二进制除法可以通过逻辑电路异或操作执行。大大加快的信息验证的速度。</p>
<p>其中，IEEE定义了八位，十六位，三十二位的生成多项式</p>
</li>
</ul>
<h2 id="链路层的两类链路">链路层的两类链路</h2>
<h3 id="一点对点链路-point-to-point">一、点对点链路 point-to-point</h3>
<ul>
<li>PPP 拨号网络</li>
<li>以太网交换机与主机之间</li>
</ul>
<p>常见的有PPP，HDLC协议</p>
<h3 id="二广播链路-broadcast-link">二、广播链路 broadcast link</h3>
<ul>
<li>传统以太网</li>
<li>HFC 光纤</li>
<li>802.11 WIFI</li>
</ul>
<h2 id="多路访问协议-multiple-access-protocols">多路访问协议 multiple access protocols</h2>
<h3 id="一-channel-partitioning-mac-protocols">一、 Channel Partitioning MAC protocols</h3>
<ol>
<li>TDMA :time division multiple access</li>
<li>FDMA :frequency division multiple access</li>
</ol>
<p>分频主要用于家庭网络下行数据(例如有线电视)</p>
<p>分时主要用于家用网络上行数据</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202103/20/163857-145047.png" alt="TDMA和FDMA示意图"></p>
<h3 id="二random-access-protocols">二、Random Access Protocols</h3>
<ol>
<li>
<p>slotted ALOHA 时隙ALOHA</p>
<p>​	同步网络下所有时钟，将时钟划分为等长的片段，每个片段仅发送一个frame，若检测到冲突则等待下个时钟再发送。</p>
<p>​	缺点主要为需要进行时钟同步成本较高。</p>
<p>​	其效率为37%。</p>
</li>
<li>
<p>Pure(unslotted) ALOHA</p>
<p>​	不需要时钟同步，想发就发。</p>
<p>​	缺点很明显，拥塞严重。</p>
<p>​	效率为18%。</p>
</li>
<li>
<p>CSMA(Carrier Sense Multiple Access) 载波监听多路访问</p>
<p>在发送数据前先监听信道是否有数据被发送，若有数据正在发送，则延迟发送。</p>
<p>存在的问题如下图。</p>
</li>
</ol>
<p><img src="C:\Users\16796\Desktop\.md图片\CSMA弊端示意图.PNG" alt="CSMA弊端示意图" style="zoom:50%;" /></p>
<p>​		当B节点发送数据后的t1时刻D节点将要发送数据，D节点监听信道而B的数据由于延迟并未	传播到D节点导致D发送了数据，而冲突产生了。</p>
<p>​		缺点明显为大量时间由于冲突被浪费。</p>
<ol start="4">
<li>
<p>CSMA/CD(Collision Detection)具有冲突检测的载波监听多路访问</p>
<p>​	节点发送数据后始终检测信道状态，若出现冲突(体现为电信号的干涉或叠加)则立即停止发送数据。并广播一条干扰信号用于提示各个节点当前状态为拥塞。</p>
<p>​	由于监听方式分为有线与无线，显然有线信号更容易被监听，所以CSMA/CD主要用于有线网络的通信，而无线网络采用CSMA/CA 是一种数据发送前监听时间更长，宁可损耗性能也保证数据传输准确的协议。</p>
<p>​	对于其缺点的解决方案有，限制节点之间的长度，限制网络内部的段数(双绞线最长100米，以太网最多五段)</p>
</li>
<li>
<p>Taking turns MAC protocol 轮流协议</p>
<p>(1) 有主控的轮流协议</p>
<p>​	有一个主机，负责调度，其他机器想要发送数据需要“举手” 主机会将令牌发送给举手的用户机器。</p>
<p>​	显然，它的缺点为需要一台主机，主机gg就都gg，轮巡开销大，延迟较高。</p>
<p>(2) 环路无主控的轮流协议</p>
<p>​	无主机所有机器围成环形，令牌按顺序传递，得到令牌的机器发送数据。</p>
<p>​	缺点几乎同上。</p>
<p>​	其适用于多节点，低频，小数据量的网络，例如蓝牙网络，FDDI</p>
</li>
</ol>
<h2 id="lan">LAN</h2>
<h3 id="maclanphysicalethernet--address">MAC(LAN/physical/Ethernet)  address</h3>
<p>MAC地址作为一个链路层地址标识，其具有不可变性，即每个网络适配器(网卡)都有唯一的出场自带的MAC地址，该地址为48bit用十六进制数表示e.g.1A-2F-BB-76-09-AD</p>
<p>其中有一个地址FF-FF-FF-FF-FF-FF作为广播地址(Broadcast address)</p>
<p>MAC地址由IEEE分配，每个网络适配器制造商向IEEE购买一段地址。</p>
<h3 id="arp--address-resolution-protocol">ARP : Address Resolution Protocol</h3>
<p>每个IP地址对应一个MAC地址，该映射由一张ARP表保存，该表中包括IP，MAC，TTL(有效期，一般是20分钟)</p>
<p>当A要向B发送数据，而A的ARP表中不存在B的对应MAC，这时，A向局域网内广播(FF-FF-FF-FF-FF-FF)一条询问信息，B收到该信息会进行应答，B将自己的MAC地址发给A，这时A的ARP表存储了B的MAC。</p>
<h2 id="ethernet">Ethernet</h2>
<p>frame 组成： preamble  dest_address  src_address  type  data  CRC</p>
<ul>
<li>preamble 八字节：10101010+pattern+10101011，用于定位一个frame的开始和结束，被用于同步接收与发送方的时钟，让接收方清空缓存区以待接收数据。</li>
<li>address 六字节 MAC地址</li>
<li>type 用于标识高层(网络层)所用的协议  2字节</li>
<li>CRC 校验码</li>
</ul>
<p>无效的frame：</p>
<ul>
<li>frame长度不是整数个字节</li>
<li>CRC码检测出错误</li>
<li>data长度不在46-1500个字节之间</li>
<li>frame长度不在64-1518个字节之间</li>
</ul>
<h2 id="csmacd-补充">CSMA/CD 补充</h2>
<p>当检测到冲突时，节点停止发送数据并发送一个48bit的干扰信号。称为强化碰撞。</p>
<p>对于10Mbps的以太网而言，若产生了n次冲突，则在集合k={0，1，2<sup>n</sup>-1&hellip;2<sup>10</sup>-1}中选择一个k(n最多为10)，停顿__k*512bit传输时间__后继续传输数据。</p>
<p>对于产生冲突的链路，先发送数据的节点在发送数据后之多2倍的端到端传输时间就可以检测到是否发生冲突，若这段时间内没有检测到碰撞，则说明本次发送一定不会产生冲突。这个时间成为__争用期或碰撞窗口__。对于10Mbps的以太网而言，争用期一般为__51.2微秒__，即发送64字节。这64个字节称为__最短有效帧长__。</p>
<p>帧间最小间隔：9.6微秒，相当于96bit的发送时间，即，当节点检测到总线开始空闲后，等待9.6微秒后才可继续发送数据。这个时间用于接收方清空缓存，为接收下一帧做准备。</p>
<h2 id="术语">术语</h2>
<h3 id="10base-t--100-base-t">10Base T / 100 Base T</h3>
<p>T表示Twisted Pair双绞线，意思是10/100Mbps的双绞线，后者被称为高速以太网。</p>
<h3 id="gbit-ethernet">Gbit Ethernet</h3>
<p>在半双工下使用CSMA/CD协议，全双工下不使用。</p>
<ul>
<li>
<p>1000BASE-X 基于光纤的物理层</p>
<ul>
<li>1000BASE-SX 短波</li>
<li>1000BASE-LX 长波</li>
<li>1000BASE-CX 铜线</li>
</ul>
</li>
<li>
<p>1000BASE-T</p>
<p>使用四对5类线UTP</p>
</li>
</ul>
<h3 id="100base-tx">100BASE-TX</h3>
<p>使用两对UTP 5类线或使用屏蔽双绞线STP</p>
<h3 id="100base-fx">100BASE-FX</h3>
<p>使用两对光纤</p>
<h3 id="100base-t4">100BASE-T4</h3>
<p>使用四对UTP 3类线或5类线</p>
<h3 id="10gbit-以太网">10Gbit 以太网</h3>
<p>帧格式不变(向下兼容)，只在全双工方式下工作，不使用CSMA/CD</p>
<h2 id="hubs-and-switches">Hubs and switches</h2>
<ol>
<li>中继器 用于放大信号</li>
<li>转换器 用于信号光电转换</li>
<li>集线器hubs 多端口中继器</li>
<li>交换机switches</li>
</ol>
<p>上面只有交换机是链路层设备，即只有交换机有链路层的协议与功能</p>
<h3 id="交换机">交换机</h3>
<p>存储转发以太网的帧，找寻MAC地址，能够自主“学习”端口对应的主机MAC，方法为：A向B发送数据帧，经过交换机转发，经过交换机时，交换机记录A的MAC与其端口对应关系保存在表(switch forwarding table)中，并向其他端口广播A的消息，B回应，交换机记录B与其端口的对应关系。</p>
<h2 id="vlans">VLANs</h2>
<p>即虚拟局域网，通过对于交换机的端口划分，可以形成逻辑上的另外一个局域网。交换机的收尾端口一般用作连接其他交换机。</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202103/29/214322-912615.png" alt="虚拟局域网帧格式"></p>
<h1 id="point-to-point">Point to Point</h1>
<ul>
<li>
<p>PPP</p>
</li>
<li>
<p>HDLC</p>
</li>
</ul>
<p>使用SOH,EOT标记帧开始与结尾</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202103/29/215310-885139.png" alt="SOHEOT"></p>
<h2 id="ppp">PPP</h2>
<ul>
<li>一个将 IP 数据报封装到串行链路的方法。</li>
<li>链路控制协议 LCP (Link Control Protocol)。</li>
<li>网络控制协议 NCP (Network Control Protocol)。</li>
</ul>
<p>PPP帧格式：</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202103/29/215613-768095.png" alt="PPP帧格式"></p>
<h3 id="工作状态">工作状态</h3>
<p>​	当用户拨号接入 ISP 时，路由器的调制解调器对拨号做出确认，并建立一条物理连接。
PC 机向路由器发送一系列的 LCP 分组（封装成多个 PPP 帧）。
​	这些分组及其响应选择一些 PPP 参数，和进行网络层配置，NCP 给新接入的 PC机分配一个临时的 IP 地址，使 PC 机成为因特网上的一个主机。
​	通信完毕时，NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着，LCP 释放数据链路层连接。最后释放的是物理层的连接。</p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="https://wzytrick.github.io/computernetwork/class1/"><i class="fa fa-chevron-circle-left"></i> Class1</a>
        </li>
        
        
        <li>
            <a href="https://wzytrick.github.io/computernetwork/class3/">Class3 <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
  
    
    
  





</main>
    <footer>
        <h6>Copyright © 2019 - WZYtrick |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://wzytrick.github.ioindex.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="https://wzytrick.github.io/js/scripts.js"></script>


</body>

</html>

