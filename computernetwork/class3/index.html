<!doctype html>

<html lang="en">

<head>
  <title>Class3 - WZYtrick&#39;s Blog</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="WZYtrick&#39;s blog." />
<meta name="author" content="WZYtrick" /><meta property="og:title" content="Class3" />
<meta property="og:description" content="Network Layer Data Plane Inside the router   Input / Output ports 数据平面
端口为双工端口，其中存有路由表。
​	其中以输入端为例，端口实现物理层，链路层，以及部分网络层功能(查表，转发，输入的未处理的数据形成的缓存队列)
Longest prefix matching 最长前缀匹配
​	端口的转发表中存着一些目的地址，当一个IP进入端口后，端口查表，根据匹配到的前缀最长的地址转发数据。
  Switching fabric 交换单元
switch rate: 输出/输入" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wzytrick.github.io/computernetwork/class3/" />
<meta property="article:published_time" content="2021-04-06T18:00:37+08:00" />
<meta property="article:modified_time" content="2021-04-06T18:00:37+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Class3"/>
<meta name="twitter:description" content="Network Layer Data Plane Inside the router   Input / Output ports 数据平面
端口为双工端口，其中存有路由表。
​	其中以输入端为例，端口实现物理层，链路层，以及部分网络层功能(查表，转发，输入的未处理的数据形成的缓存队列)
Longest prefix matching 最长前缀匹配
​	端口的转发表中存着一些目的地址，当一个IP进入端口后，端口查表，根据匹配到的前缀最长的地址转发数据。
  Switching fabric 交换单元
switch rate: 输出/输入"/>

<meta name="generator" content="Hugo 0.80.0" />
    

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://wzytrick.github.io/fontawesome/css/all.min.css" />
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  
  
  <link rel="stylesheet" type="text/css" href="https://wzytrick.github.io/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://wzytrick.github.io/">WZYtrick&rsquo;s Blog</a>
            </h1>

      <ul id="social-media">
             <li>
               <a href="mailto:1679636965@qq.com" title="Email me">
               <i class="fas fa-envelope fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://github.com/WZYtrick" title="GitHub">
               <i class="fab fa-github fa-lg"></i>
               </a>
             </li>
      </ul>
      
      <p><em>A blog which belongs to WZYtrick.</em></p>
      
    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="" href="https://wzytrick.github.io/computernetwork/">
                <i class="fa-li fa  fa-lg"></i><span>Computer Network</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/datastructure/">
                <i class="fa-li fa  fa-lg"></i><span>Data Structure</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/db/">
                <i class="fa-li fa  fa-lg"></i><span>DataBase</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/os/">
                <i class="fa-li fa  fa-lg"></i><span>OS</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/posts/">
                <i class="fa-li fa  fa-lg"></i><span>Posts</span>
            </a>
        </li>
        
    </ul>
</nav>


    <main>




<article>

    <h1>Class3</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2021-04-06T18:00:37&#43;08:00">Apr 6, 2021</time>
        </li>
        
        

        

        <li>One minute read</li>
    </ul>
</aside>

    

    
<div class="featured_image">
    <a href="https://wzytrick.github.io/computernetwork/class3/" title="Class3">
        <img src="">
    </a>
</div>



    <h1 id="network-layer">Network Layer</h1>
<h2 id="data-plane">Data Plane</h2>
<h3 id="inside-the-router">Inside the router</h3>
<ul>
<li>
<p>Input / Output ports          数据平面</p>
<p>端口为双工端口，其中存有路由表。</p>
<p>​	其中以输入端为例，端口实现物理层，链路层，以及部分网络层功能(查表，转发，输入的未处理的数据形成的缓存队列)</p>
<p><strong>Longest prefix matching 最长前缀匹配</strong></p>
<p>​	端口的转发表中存着一些目的地址，当一个IP进入端口后，端口查表，根据匹配到的前缀最长的地址转发数据。</p>
</li>
<li>
<p>Switching fabric 交换单元</p>
<p><strong>switch rate</strong>: 输出/输入</p>
<p>交换单元现有三代：</p>
<ol>
<li>
<p>Switching Via Memory 基于内存的交换</p>
<p>数据存入内存再取出，速度取决的内存的读写速度。</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202104/06/204846-296107.png" alt="基于内存的交换"></p>
</li>
<li>
<p>Switching Via a Bus 基于总线的交换</p>
<p>所有端口共享一条总线，速度取决于总线带宽，数据量大时有可能产生冲突。</p>
<p>速度可以达到32Gbps，足够企业级路由器使用。</p>
<p><img src="C:%5CUsers%5C16796%5CDesktop.md%E5%9B%BE%E7%89%87%5C%E5%9F%BA%E4%BA%8E%E6%80%BB%E7%BA%BF%E7%9A%84%E4%BA%A4%E6%8D%A2.PNG" alt="基于总线的交换"></p>
</li>
<li>
<p>Switching Via An Interconnection Network 基于交换连接线的交换</p>
<p>克服总线带宽限制，可分割数据报为多个固定长度的子段，由交换单元传输。</p>
<p>速度可达60Gbps，主要用于主干路由器，直接连接光纤网络。</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202104/06/204903-260382.png" alt="基于交互连接线的交换"></p>
</li>
</ol>
</li>
</ul>
<hr>
<ul>
<li>Routing processor          控制平面</li>
</ul>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202104/06/201236-236794.png" alt="路由器内部结构"></p>
<h3 id="有关端口几种队列">有关端口几种队列</h3>
<ol>
<li>
<p>FIFO(first in first out)</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202104/12/203333-681558.png" alt="FIFO"></p>
</li>
<li>
<p>Priority Queuing</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202104/12/212205-31766.png" alt="priority queuing"></p>
</li>
<li>
<p>Round Robin and Weighted Fair Queuing (WFQ)</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202104/12/204242-506227.png" alt="weightfairqueuing"></p>
</li>
</ol>
<h2 id="ipv4">IPv4</h2>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202104/12/213300-49422.png" alt="ipv4format"></p>
<ul>
<li>
<p><strong>Version number</strong></p>
<p>IP协议版本号</p>
</li>
<li>
<p><strong>Header length</strong></p>
<p>头部的长度，主要确定option的长度</p>
</li>
<li>
<p><strong>Type of service(TOS)</strong></p>
<p>数据报的协议类型，例如real-time datagrams/non-real-time datagrams(e.g. FTP)</p>
</li>
<li>
<p><strong>Datagram length</strong></p>
<p>整个报文的长度，包括头部和数据部分</p>
</li>
<li>
<p><strong>Identifier, flags, fragmentation offset</strong></p>
<p>用于对报文分段的控制，后文会提到</p>
</li>
<li>
<p><strong>Time-to-live</strong></p>
<p>报文生存时长，一般为路由器跳数</p>
</li>
<li>
<p><strong>Protocol</strong></p>
<p>传输层使用的协议</p>
</li>
<li>
<p><strong>Header checksum</strong></p>
<p>首部校验和，确认首部是否有error</p>
</li>
<li>
<p><strong>Source and destination IP addresses</strong></p>
<p>源地址，目的地址</p>
</li>
<li>
<p><strong>Options</strong></p>
<p>选项，可以添加在头部的信息</p>
</li>
<li>
<p><strong>Data</strong></p>
</li>
</ul>
<p>首部无option有20bytes</p>
<h2 id="ip-fragmentation--reassembly-数据报的切分和重组">IP Fragmentation &amp; Reassembly 数据报的切分和重组</h2>
<p>​	由于链路层最大帧长有限，且不同的链路层协议最大帧长不同，所以网络层在传输数据前要考虑对大的数据报进行分片，一个链路层帧能承载的最大数据量叫做最大传送单元(Maximum Transmission Unit,MTU)。</p>
<p>​	一般而言为了保证网络内核的简单，一般路由器仅支持将IP数据报分段的操作而不支持重组的操作，否则每个路由器将实现重组操作将十分复杂。</p>
<p>​	在分段中，同一个大的报文将有同样的标识号(ID)，以及它后面是否还有被拆分的数据报(fragflag 1/0)，以及它对于第一段的偏移量(offset，单位是字)</p>
<h2 id="ip路由查看操作命令">IP路由查看、操作命令</h2>
<p>（1） winipcfg （ipconfig）</p>
<p>适用环境：WINDOWS系统
使用格式：winipcfg [/?] [/all]
参数介绍：
/? 显示winipcfg的格式和参数的英文说明
/all 显示所有的有关IP地址的配置信息
主要功能：显示用户所在主机内部的IP协议的配置信息</p>
<p>（2）netstat</p>
<p>适用环境： WINDOWS系统
使用格式：netstat [-r] [-s] [-n] [-a]
参数介绍：
-r 显示本机路由表的内容
-s 显示每个协议的使用状态（包括TCP协议、UDP协议、IP协议）
-n 以数字表格形式显示地址和端口
-a 显示所有主机的端口号
主要功能：该命令可以使用户了解到自己的主机是怎样与因特网相连接的。</p>
<h2 id="ip编址">IP编址</h2>
<p>​	在CIDR(Classless Interdomain Routing,无类别域间路由选择)被采用之前，使用分类编址方案，</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202104/20/163948-209125.png" alt="分类编址"></p>
<p>即：</p>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202104/20/164234-462987.png" alt="分类编址各类范围"></p>
<p>使用范围：一般不使用一个网段的第一个地址空间(作为该网段的标识)和最后一个地址空间(作为该网段的广播地址)</p>
<p>特点：在网络上不可以有两个完全相同的IP地址，一个主机连接到两个网络时将同时具备两个相应的IP，例如路由器，且这两个IP一定不在一个网络下，即net-id不同。</p>
<h3 id="管理ip地址的机构">管理IP地址的机构：</h3>
<p>Internet Information Center(InterNIC)的IANA</p>
<p>IANA将大地址分给区域IP地址管理机构分发。</p>
<h3 id="扩展">扩展</h3>
<p>中国大陆地区拥有IP地址23846144个，约1.4个A类地址</p>
<p>在IP地址的主要三种类型中，各保留了三个区域作为私有地址，其地址范围如下：</p>
<ul>
<li>A类地址：10.0.0.0～10.255.255.255</li>
<li>B类地址：172.16.0.0～172.31.255.255</li>
<li>C类地址：192.168.0.0～192.168.255.255</li>
</ul>
<h3 id="几种路由">几种路由</h3>
<p>一般根据最长前缀匹配查找路由表，多次间接交付。</p>
<ul>
<li>
<p>特定主机路由</p>
<p>为一个特定的目的主机指明一个路由，一般用于网络管理人员更方便的控制和测试网络，同时也可在需要考虑某种安全问题时采用这种特定主机路由。</p>
</li>
<li>
<p>默认路由</p>
<p>一般用于家用小网络，仅几个主机连在路由表上，其余都经由默认路由转发。</p>
</li>
</ul>
<h3 id="subnet--subnet-mask">Subnet &amp; Subnet mask</h3>
<p><img src="https://raw.githubusercontent.com/WZYtrick/myImages/main/images202104/20/211251-612469.png" alt="子网，子网掩码示意图"></p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="https://wzytrick.github.io/computernetwork/class2/"><i class="fa fa-chevron-circle-left"></i> Class2</a>
        </li>
        
        
    </ul>
</section>
  
    
    
  





</main>
    <footer>
        <h6>Copyright © 2019 - WZYtrick |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://wzytrick.github.ioindex.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="https://wzytrick.github.io/js/scripts.js"></script>


</body>

</html>

