<!doctype html>

<html lang="en">

<head>
  <title>Class7 - WZYtrick&#39;s Blog</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="WZYtrick&#39;s blog." />
<meta name="author" content="WZYtrick" /><meta property="og:title" content="Class7" />
<meta property="og:description" content="View Transaction and Constraint in SQL View 视图 保存一个查询语句，具体语法如下：
create view v as select from where ... 视图一般不支持对其的修改，不过在视图上修改是现今研究课题之一。
Transaction 事务 事务是由查询和(或)更新语句的序列组成。
  Commit work 提交当前事务
将当前事务所做的更新在数据库中永久保存。
  Rollback work 回滚当前事务" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wzytrick.github.io/db/class7/" />
<meta property="article:published_time" content="2021-04-07T19:06:36+08:00" />
<meta property="article:modified_time" content="2021-04-07T19:06:36+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Class7"/>
<meta name="twitter:description" content="View Transaction and Constraint in SQL View 视图 保存一个查询语句，具体语法如下：
create view v as select from where ... 视图一般不支持对其的修改，不过在视图上修改是现今研究课题之一。
Transaction 事务 事务是由查询和(或)更新语句的序列组成。
  Commit work 提交当前事务
将当前事务所做的更新在数据库中永久保存。
  Rollback work 回滚当前事务"/>

<meta name="generator" content="Hugo 0.80.0" />
    

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://wzytrick.github.io/fontawesome/css/all.min.css" />
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  
  
  <link rel="stylesheet" type="text/css" href="https://wzytrick.github.io/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://wzytrick.github.io/">WZYtrick&rsquo;s Blog</a>
            </h1>

      <ul id="social-media">
             <li>
               <a href="mailto:1679636965@qq.com" title="Email me">
               <i class="fas fa-envelope fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://github.com/WZYtrick" title="GitHub">
               <i class="fab fa-github fa-lg"></i>
               </a>
             </li>
      </ul>
      
      <p><em>A blog which belongs to WZYtrick.</em></p>
      
    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="" href="https://wzytrick.github.io/computernetwork/">
                <i class="fa-li fa  fa-lg"></i><span>Computer Network</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/datastructure/">
                <i class="fa-li fa  fa-lg"></i><span>Data Structure</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/db/">
                <i class="fa-li fa  fa-lg"></i><span>DataBase</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/os/">
                <i class="fa-li fa  fa-lg"></i><span>OS</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://wzytrick.github.io/posts/">
                <i class="fa-li fa  fa-lg"></i><span>Posts</span>
            </a>
        </li>
        
    </ul>
</nav>


    <main>




<article>

    <h1>Class7</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2021-04-07T19:06:36&#43;08:00">Apr 7, 2021</time>
        </li>
        
        

        

        <li>One minute read</li>
    </ul>
</aside>

    

    
<div class="featured_image">
    <a href="https://wzytrick.github.io/db/class7/" title="Class7">
        <img src="">
    </a>
</div>



    <h1 id="view-transaction-and-constraint-in-sql">View Transaction and Constraint in SQL</h1>
<h2 id="view-视图">View 视图</h2>
<p>保存一个查询语句，具体语法如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">view</span> v <span style="color:#66d9ef">as</span>
<span style="color:#66d9ef">select</span>
<span style="color:#66d9ef">from</span>
<span style="color:#66d9ef">where</span> ...
</code></pre></div><p>视图一般不支持对其的修改，不过在视图上修改是现今研究课题之一。</p>
<h2 id="transaction-事务">Transaction 事务</h2>
<p>事务是由查询和(或)更新语句的序列组成。</p>
<ul>
<li>
<p>Commit work 提交当前事务</p>
<p>将当前事务所做的更新在数据库中永久保存。</p>
</li>
<li>
<p>Rollback work 回滚当前事务</p>
<p>撤销该事务中所有SQL语句对数据库的操作，无法回滚已提交的事务，主要用于取消正在执行的事务，应对系统崩溃，断电等现象。</p>
</li>
</ul>
<h2 id="constraint-约束">Constraint 约束</h2>
<p>create table上的约束</p>
<ul>
<li>
<p>not null</p>
<p>某属性值不可为空</p>
</li>
<li>
<p>unique</p>
<p>unique(A1,A2,A3&hellip;)生成一组候选码，这意味着其值不可能完全相同。</p>
</li>
<li>
<p>check(&lt;谓词&gt;)</p>
<p>e.g. 使用check实现一个枚举类型</p>
<p>​	check(semester in (&lsquo;Fall&rsquo;,&lsquo;Winter&rsquo;,&lsquo;Spring&rsquo;,&lsquo;Summer&rsquo;)));</p>
<p>check 中可添加更复杂的断言语句。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">domain</span> hourly_wage numeric(<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">2</span>)
  <span style="color:#66d9ef">constraint</span> value_test <span style="color:#66d9ef">check</span>(value<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">4</span>.<span style="color:#ae81ff">00</span>)
</code></pre></div><p>有关断言(assertion)</p>
<p>create assertion &lt; assertion_name &gt; check &lt; predicate &gt;</p>
<p>是对数据库中一项或几项属性的约束，数据库会检查记录是否符合断言，这会产生很大的开销，注意使用。</p>
</li>
</ul>
<h1 id="sql中的数据类型和模式">SQL中的数据类型和模式</h1>
<h2 id="时间与日期">时间与日期</h2>
<ul>
<li>date &ldquo;yyyy-mm-dd&rdquo;</li>
<li>time &ldquo;hh:mm:ss&rdquo;</li>
<li>timestamp &ldquo;yyyy-mm-dd hh:mm:ss&rdquo;</li>
<li>interval 一段时间，一个间隔值，可以使以上三种类型之一</li>
</ul>
<h3 id="函数操作">函数/操作</h3>
<ul>
<li>
<p>extract(year from r.start_time)</p>
<p>从三种类型的时间格式中截取某一值，上例为年</p>
</li>
<li>
<p>cast &lt;string_valued_expression&gt; as date/time</p>
<p>将一个字符串转换成日期或时间类型</p>
</li>
</ul>
<h2 id="default-value">default value</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> t
(
    something numeric(<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">default</span> <span style="color:#ae81ff">0</span>,
);
</code></pre></div><h2 id="large-object-type">Large-object type</h2>
<p>用于储存照片音频视频等</p>
<p>可声明属性如下：</p>
<p>book clob(10KB) 字符大对象类型</p>
<p>image blob(10MB) 二进制数据大对象类型</p>
<h2 id="用户定义类型">用户定义类型</h2>
<p>&mdash;不重要</p>
<h1 id="authorization-授权">Authorization 授权</h1>
<p>权限(privileges)有，select insert update delete</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">grant</span><span style="color:#f92672">/</span><span style="color:#66d9ef">revoke</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">privileges</span> list<span style="color:#f92672">&gt;</span> <span style="color:#75715e">/* 授权 / 收回 */</span>
<span style="color:#66d9ef">on</span> <span style="color:#f92672">&lt;</span>relationship<span style="color:#f92672">/</span><span style="color:#66d9ef">view</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">to</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">user</span> list<span style="color:#f92672">&gt;</span>
</code></pre></div><p>详见书</p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="https://wzytrick.github.io/db/class6/"><i class="fa fa-chevron-circle-left"></i> Class6</a>
        </li>
        
        
    </ul>
</section>
  
    
    
  





</main>
    <footer>
        <h6>Copyright © 2019 - WZYtrick |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://wzytrick.github.ioindex.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="https://wzytrick.github.io/js/scripts.js"></script>


</body>

</html>

